<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[KamAcoma]]></title>
  <link href="http://colca.github.com/atom.xml" rel="self"/>
  <link href="http://colca.github.com/"/>
  <updated>2014-04-22T02:25:41-07:00</updated>
  <id>http://colca.github.com/</id>
  <author>
    <name><![CDATA[colca]]></name>
    <email><![CDATA[colca7@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rails 4.0: uninitialized constant ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::PG]]></title>
    <link href="http://colca.github.com/blog/2014/04/22/rails-4-dot-0-uninitialized-constant-activerecord-connectionadapters-postgresqladapter-pg/"/>
    <updated>2014-04-22T02:22:00-07:00</updated>
    <id>http://colca.github.com/blog/2014/04/22/rails-4-dot-0-uninitialized-constant-activerecord-connectionadapters-postgresqladapter-pg</id>
    <content type="html"><![CDATA[<p>After install pg 0.12.1, db can&rsquo;t be migrated, rake db:migrate causes error message after scaffolding:<br>
&ldquo;uninitialized constant ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::PG&rdquo;<br></p>

<p>Solution:<br>
Update pg to &lsquo;0.15.1&rsquo;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi Gemfile
</span><span class='line'>gem 'pg', '0.15.1'
</span><span class='line'>$bundle update</span></code></pre></td></tr></table></div></figure>


<p>source:<a href="http://stackoverflow.com/questions/17411650/new-rails-app-postgres-wont-install">http://stackoverflow.com/questions/17411650/new-rails-app-postgres-wont-install</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOS: PostgreSQL for Rails]]></title>
    <link href="http://colca.github.com/blog/2014/04/22/centos-postgresql-for-rails/"/>
    <updated>2014-04-22T01:16:00-07:00</updated>
    <id>http://colca.github.com/blog/2014/04/22/centos-postgresql-for-rails</id>
    <content type="html"><![CDATA[<p>After modifying Gemfile, install Gem pg or bundle update may cause error <br>
&ldquo;ERROR: Failed to build gem native extension.&rdquo; <br>
&ldquo;Gem files will remain installed in /var/www/simpletrac/vendor/cache/ruby/1.9.1/gems/pg-    0.12.0 for inspection.
Results logged to /var/www/simpletrac/vendor/cache/ruby/1.9.1/gems/pg-0.12.0/ext/gem_make.out
An error occured while installing pg (0.12.0), and Bundler cannot continue.&rdquo;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#install gem
</span><span class='line'>$gem install pg -v '0.12.0' -- --with-pg-config=/usr/pgsql-9.3/bin/pg_config
</span><span class='line'>#config bundle
</span><span class='line'>$bundle config build.pg --with-pg-config=/usr/pgsql-9.3/bin/pg_config
</span><span class='line'>#bundle update
</span><span class='line'>$bundle update</span></code></pre></td></tr></table></div></figure>


<p>source: <a href="http://stackoverflow.com/questions/9234960/gem-install-pg-with-pg-config-works-bundle-fails">http://stackoverflow.com/questions/9234960/gem-install-pg-with-pg-config-works-bundle-fails</a><br></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hive with PostgreSQL: message:javax.jdo.JDOException: Couldnt obtain a new sequence (unique id)]]></title>
    <link href="http://colca.github.com/blog/2014/04/21/hive-with-postgresql-message-javax-dot-jdo-dot-jdoexception-couldnt-obtain-a-new-sequence-unique-id/"/>
    <updated>2014-04-21T23:08:00-07:00</updated>
    <id>http://colca.github.com/blog/2014/04/21/hive-with-postgresql-message-javax-dot-jdo-dot-jdoexception-couldnt-obtain-a-new-sequence-unique-id</id>
    <content type="html"><![CDATA[<p>After configuring PostgreSQL as metastore of Hive, &lsquo;show tables&rsquo; works fine but creating table will give below error message:<br><br></p>

<p>message:javax.jdo.JDOException: Couldnt obtain a new sequence (unique id)<br></p>

<p>Check log_directory to find out where is the postgreSQL log in postgresql.conf</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi /var/lib/pgsql/9.3/data/postgresql.conf</span></code></pre></td></tr></table></div></figure>


<p>Log shows  &ldquo;permission denied for relation CDS&rdquo;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>INSERT INTO "SEQUENCE_TABLE" ("SEQUENCE_NAME","NEXT_VAL") VALUES ($1,$2)
</span><span class='line'>  permission denied for relation CDS</span></code></pre></td></tr></table></div></figure>


<p>Solve the problem by granting privilege of schema and table to user hiveuser</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$su postgres
</span><span class='line'>$batch psql
</span><span class='line'>postgres=# \c metastore  #metastore database which is used as metastore of Hive
</span><span class='line'>metastore=# GRANT ALL ON SCHEMA public to hiveuser;
</span><span class='line'>metastore=# GRANT ALL ON ALL SEQUENCES IN SCHEMA public TO hiveuser;
</span><span class='line'>metastore=# GRANT ALL ON ALL TABLES IN SCHEMA public TO hiveuser;</span></code></pre></td></tr></table></div></figure>


<p>source:<br>
<a href="http://stackoverflow.com/questions/13497352/error-permission-denied-for-relation-tablename-on-postgres-while-trying-a-selec">http://stackoverflow.com/questions/13497352/error-permission-denied-for-relation-tablename-on-postgres-while-trying-a-selec</a><br></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[hive: configure PostgreSQL as Hive Metastore]]></title>
    <link href="http://colca.github.com/blog/2014/04/18/hive-configure-postgresql-as-hive-metastore/"/>
    <updated>2014-04-18T17:31:00-07:00</updated>
    <id>http://colca.github.com/blog/2014/04/18/hive-configure-postgresql-as-hive-metastore</id>
    <content type="html"><![CDATA[<ul>
<li>Step 1 <a href="http://colca7.com/blog/2014/04/18/install-postgresql-on-centos/" target="_blank">Install and start PostgreSQL</a><br>
Set standard_confroming_strings to off</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi /var/lib/pgsql/9.3/data/postgresql.conf
</span><span class='line'>standard_conforming_strings=off #set this off</span></code></pre></td></tr></table></div></figure>


<p>Allow remote access</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi /var/lib/pgsql/9.3/data/pg_hba.conf
</span><span class='line'>host    all         all         0.0.0.0         0.0.0.0               md5 #modify ident to md5 or password</span></code></pre></td></tr></table></div></figure>


<p>Start or restart postgresql service</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$sudo service postgresql-9.3 start</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Step 2 Install Postgres JDBC Driver (for Redhat 6)</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$sudo yum install postgresql-jdbc
</span><span class='line'>$ln -s /usr/share/java/postgresql-jdbc.jar /usr/lib/hive/lib/postgresql-jdbc.jar</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Step 3 Create the metastore database and user account</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$sudo su - postgres
</span><span class='line'>bash$ psql
</span><span class='line'>postgres=# CREATE USER hiveuser WITH PASSWORD 'mypassword';
</span><span class='line'>postgres=# CREATE DATABASE metastore;
</span><span class='line'>postgres=# \c metastore;
</span><span class='line'>You are now connected to database 'metastore'.
</span><span class='line'>metastore=# \i /usr/lib/hive/scripts/metastore/upgrade/postgres/hive-schema-0.10.0.postgres.sql
</span><span class='line'>SET
</span><span class='line'>SET
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<p>Grant permission for all metastore tables to user hiveuser by the following SQL script</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>metastore=#  \o /tmp/grant-privs
</span><span class='line'>metastore=#   SELECT 'GRANT SELECT,INSERT,UPDATE,DELETE ON "' || schemaname || '"."' || tablename || '" TO hiveuser;'
</span><span class='line'>metasotre=#       FROM pg_tables
</span><span class='line'>metastore=#       WHERE tableowner = CURRENT_USER and schemaname = 'public';
</span><span class='line'>metastore=#       \o
</span><span class='line'>metastore=#       \i /tmp/grant-privs</span></code></pre></td></tr></table></div></figure>


<p>Verify the connection:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>psql -h myhost -U hiveuser -d metastore
</span><span class='line'>metastore=#</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Step 4 Configure Metastore Service to Communicate with the PostgreSQL DB</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi /usr/lib/hive/conf/hive-site.xml
</span><span class='line'>#Modify following properties
</span><span class='line'>&lt;property&gt;
</span><span class='line'>  &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
</span><span class='line'>  &lt;value&gt;jdbc:postgresql://myhost/metastore&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'> 
</span><span class='line'>&lt;property&gt;
</span><span class='line'>  &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
</span><span class='line'>  &lt;value&gt;org.postgresql.Driver&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'> 
</span><span class='line'>&lt;property&gt;
</span><span class='line'>  &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
</span><span class='line'>  &lt;value&gt;hiveuser&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'> 
</span><span class='line'>&lt;property&gt;
</span><span class='line'>  &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
</span><span class='line'>  &lt;value&gt;mypassword&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'> 
</span><span class='line'>&lt;property&gt;
</span><span class='line'>  &lt;name&gt;datanucleus.autoCreateSchema&lt;/name&gt;
</span><span class='line'>  &lt;value&gt;false&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'>
</span><span class='line'>&lt;property&gt;
</span><span class='line'>  &lt;name&gt;hive.metastore.uris&lt;/name&gt;
</span><span class='line'>  &lt;value&gt;&lt;/value&gt;
</span><span class='line'>  &lt;description&gt;IP address (or fully-qualified domain name) and port of the metastore host&lt;/description&gt;
</span><span class='line'>&lt;/property&gt;</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Step 5 Test connectivity to metastore</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$hive -e "show tables;"</span></code></pre></td></tr></table></div></figure>


<br>


<p>Trouble Shooting <br></p>

<ul>
<li>Ppsql 9.3: fatal: ident authentication failed for user<br><br>
ident authentication configuration will cause above error when trying to connect metastore with hiveuser, using md5 (more secure) or password instead in the pg_hba.conf<br>
<a href="https://docs.google.com/document/d/13ymGYj9e7YPFiaffwixLzsWJygp_OfBmgBi4Axgrg5A/edit">Sample doc</a><br></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi /var/lib/pgsql/9.3/data/pg_hba.conf
</span><span class='line'>host    all         all         0.0.0.0         0.0.0.0               md5</span></code></pre></td></tr></table></div></figure>


<ul>
<li>FAILED: Error in metadata: MetaException(message:Got exception: org.apache.hadoop.hive.metastore.api.MetaException javax.jdo.JDODataStoreException: Error executing JDOQL query &ldquo;SELECT &#8220;THIS&rdquo;.&ldquo;TBL_NAME&rdquo; AS NUCORDER0 FROM &ldquo;TBLS&rdquo; &ldquo;THIS&rdquo; LEFT OUTER JOIN &ldquo;DBS&rdquo; &ldquo;THIS_DATABASE_NAME&rdquo; ON &ldquo;THIS&rdquo;.&ldquo;DB_ID&rdquo; = &ldquo;THIS_DATABASE_NAME&rdquo;.&ldquo;DB_ID&rdquo; WHERE &ldquo;THIS_DATABASE_NAME&rdquo;.&ldquo;NAME&rdquo; = ? AND (LOWER(&ldquo;THIS&rdquo;.&ldquo;TBL_NAME&rdquo;) LIKE ? ESCAPE &lsquo;\&rsquo; ) ORDER BY NUCORDER0 &ldquo; : ERROR: invalid escape string<br><br>
This is caused by setting standard_conforming_strings to on in postgresql.conf, set it off will eliminate the error.</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi /var/lib/pgsql/9.3/data/postgresql.conf
</span><span class='line'>standard_conforming_strings=off #set this off</span></code></pre></td></tr></table></div></figure>


<p>Source: <a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH4/4.2.0/CDH4-Installation-Guide/cdh4ig_topic_18_4.html">http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH4/4.2.0/CDH4-Installation-Guide/cdh4ig_topic_18_4.html</a><br></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install PostgreSQL on CentOS]]></title>
    <link href="http://colca.github.com/blog/2014/04/18/install-postgresql-on-centos/"/>
    <updated>2014-04-18T01:11:00-07:00</updated>
    <id>http://colca.github.com/blog/2014/04/18/install-postgresql-on-centos</id>
    <content type="html"><![CDATA[<ul>
<li>configure YUM repository<br></li>
</ul>


<p>/etc/yum.repos.d/CentOS-Base.repo, [base]&amp;[update] sections, append line:<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>exclude=postgresql*</span></code></pre></td></tr></table></div></figure>


<ul>
<li>download and install RPM <br>
view  <a href="http://yum.postgresql.org">http://yum.postgresql.org</a> to find correct RPM</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$curl -O http://yum.postgresql.org/9.3/redhat/rhel-6-x86_64/pgdg-centos93-9.3-1.noarch.rpm
</span><span class='line'>$rpm -ivh pgdg-centos93-9.3.1.noarch.rpm</span></code></pre></td></tr></table></div></figure>


<ul>
<li>install PostgreSql</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$yum list postgres*
</span><span class='line'>$yum install postgresql193-server</span></code></pre></td></tr></table></div></figure>


<ul>
<li>initialize (only need once)</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$service postgresql-9.3 initdb</span></code></pre></td></tr></table></div></figure>


<p>configure postgresql to automatic start when OS starts:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$chkconfig postgresql-9.3 on</span></code></pre></td></tr></table></div></figure>


<ul>
<li>control service</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$service postgresql-9.3 start
</span><span class='line'>$service postgresql-9.3 restart
</span><span class='line'>$service postgresql-9.3 stop
</span><span class='line'>$service postgresql-9.3 reload #reload pg_hba.conf while keep db running</span></code></pre></td></tr></table></div></figure>


<p>source: <a href="https://wiki.postgresql.org/wiki/YUM_Installation">https://wiki.postgresql.org/wiki/YUM_Installation</a><br></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hadoop: Install Sqoop on centos]]></title>
    <link href="http://colca.github.com/blog/2014/04/12/hadoop-install-sqoop-on-centos/"/>
    <updated>2014-04-12T22:40:00-07:00</updated>
    <id>http://colca.github.com/blog/2014/04/12/hadoop-install-sqoop-on-centos</id>
    <content type="html"><![CDATA[<p>Apache Sqoop Page: <a href="http://sqoop.apache.org/">http://sqoop.apache.org/</a> <br></p>

<p>My Hadoop Version : 2.2.0<br>
Sqoop version: sqoop-1.4.4.bin__hadoop-2.0.4-alpha.tar.gz<br></p>

<ul>
<li>Download Sqoop and Unzip</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$tar -xvf sqoop-1.4.4.bin__hadoop-2.0.4-alpha.tar.gz 
</span><span class='line'>$mv sqoop-1.4.4 /usr/lib/sqoop</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Config bash</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi ~/.bashrc
</span><span class='line'>#add content
</span><span class='line'>export SQOOP_HOME=/usr/lib/sqoop
</span><span class='line'>export PATH=$SQOOP_HOME/bin:$PATH</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Config Sqoop</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$cd $SQOOP_HOME/conf
</span><span class='line'>$mv sqoop-env-template.sh sqoop-env.sh
</span><span class='line'>$vi sqoop-env.sh
</span><span class='line'>#edit content
</span><span class='line'>export HADOOP_COMMON_HOME=/usr/local/hadoop
</span><span class='line'>export HADOOP_MAPRED_HOME=/usr/local/hadoop</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Download and unzip MySql dirver lib file: mysql-connector-java-5.1.30.tar.gz</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$cp  mysql-connector-java-5.1.30-bin.jar /usr/lib/sqoop/lib</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Test<br></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$mysql -u root -p
</span><span class='line'>mysql&gt; create database mydemo;
</span><span class='line'>mysql&gt; use mydemo;
</span><span class='line'>mysql&gt; create table wordcount ( word char(36) not null primary key, n int) DEFAULT CHARSET=utf8;
</span><span class='line'>mysql&gt; exit
</span><span class='line'>
</span><span class='line'>#export by sqoop from hdfs file to mysql
</span><span class='line'>$sqoop export --connect jdbc:mysql://localhost/mydemo \
</span><span class='line'>--table wordcount --export-dir /user/hduser/HF.out \
</span><span class='line'>--fields-terminated-by '\t' --username root --password &lt;password&gt;</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rails: upload picture to s3 with paperclip]]></title>
    <link href="http://colca.github.com/blog/2014/03/24/rails-upload-picture-to-s3-with-paperclip/"/>
    <updated>2014-03-24T14:30:00-07:00</updated>
    <id>http://colca.github.com/blog/2014/03/24/rails-upload-picture-to-s3-with-paperclip</id>
    <content type="html"><![CDATA[<ul>
<li>Create a new s3 bucket, add CORS policy:<br></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
</span><span class='line'>&lt;CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"&gt;
</span><span class='line'>    &lt;CORSRule&gt;
</span><span class='line'>        &lt;AllowedOrigin&gt;*/AllowedOrigin&gt;
</span><span class='line'>        &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;
</span><span class='line'>        &lt;AllowedMethod&gt;POST&lt;/AllowedMethod&gt;
</span><span class='line'>        &lt;AllowedMethod&gt;PUT&lt;/AllowedMethod&gt;
</span><span class='line'>        &lt;MaxAgeSeconds&gt;3000&lt;/MaxAgeSeconds&gt;
</span><span class='line'>        &lt;AllowedHeader&gt;*/AllowedHeader&gt;
</span><span class='line'>    &lt;/CORSRule&gt;
</span><span class='line'>&lt;/CORSConfiguration&gt;</span></code></pre></td></tr></table></div></figure>


<p>Make the s3 bucket as public <br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{
</span><span class='line'>  "Version": "2008-10-17",
</span><span class='line'>  "Statement": [
</span><span class='line'>      {
</span><span class='line'>          "Sid": "AllowPublicRead",
</span><span class='line'>          "Effect": "Allow",
</span><span class='line'>          "Principal": {
</span><span class='line'>              "AWS": "*
</span><span class='line'>          },
</span><span class='line'>          "Action": "s3:GetObject",
</span><span class='line'>          "Resource": "arn:aws:s3:::bucketname/*
</span><span class='line'>      }
</span><span class='line'>  ]
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Edit Gemfile to add following gems<br></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Gemfile
</span><span class='line'>gem 'paperclip', '~&gt;3.5.0'
</span><span class='line'># 3.5.0 version paperclip works with Rails 4
</span><span class='line'>gem 'aws-sdk'
</span><span class='line'>gem 's3_direct_upload'</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Specify AWS configuration variables for production environment<br></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># config/environments/production.rb
</span><span class='line'>config.paperclip_defaults = {
</span><span class='line'>  :storage =&gt; :s3,
</span><span class='line'>  :s3_credentials =&gt; {
</span><span class='line'>    :bucket =&gt; ENV['S3_BUCKET_NAME'],
</span><span class='line'>    :access_key_id =&gt; ENV['AWS_ACCESS_KEY_ID'],
</span><span class='line'>    :secret_access_key =&gt; ENV['AWS_SECRET_ACCESS_KEY']
</span><span class='line'>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Set AWS configuration variables on heroku app<br></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ heroku config:set S3_BUCKET_NAME=your_bucket_name
</span><span class='line'>$ heroku config:set AWS_ACCESS_KEY_ID=your_access_key_id
</span><span class='line'>$ heroku config:set AWS_SECRET_ACCESS_KEY=your_secret_access_key</span></code></pre></td></tr></table></div></figure>


<p>
(your aws credentials reside in account->security credentials)<br>
check heroku configuration<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ heroku config</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Rails update database</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rails g migration AddPicPaperClip</span></code></pre></td></tr></table></div></figure>


<p>Edit migration as below, we are adding four columns to the existing movies table<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class AddPicPaperclip &lt; ActiveRecord::Migration
</span><span class='line'>  def self.up
</span><span class='line'>    add_column :movies, :pic_file_name, :string
</span><span class='line'>    add_column :movies, :pic_content_type, :string
</span><span class='line'>    add_column :movies, :pic_file_size,    :integer
</span><span class='line'>    add_column :movies, :pic_updated_at,   :datetime
</span><span class='line'>  end
</span><span class='line'>  def self.down
</span><span class='line'>    remove_column :movies, :pic_file_name
</span><span class='line'>    remove_column :movies, :pic_content_type
</span><span class='line'>    remove_column :movies, :pic_file_size
</span><span class='line'>    remove_column :movies, :pic_updated_at
</span><span class='line'>  end
</span><span class='line'>end
</span></code></pre></td></tr></table></div></figure>


<p>Run the migration to update the db<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake db:migrate</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Models</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#app/model/movies.rb
</span><span class='line'>class Movie &lt; ActiveRecord::Base
</span><span class='line'>  validates :title, :presence =&gt; true, :uniqueness =&gt; true, :length =&gt; {minimum: 3, too_short: "must have at least %{count} chars"}
</span><span class='line'>  before_save :capitalize_title
</span><span class='line'>  has_attached_file :pic, :styles =&gt;
</span><span class='line'>        { :medium =&gt; "300*00&gt;", :thumb =&gt; "100*100&gt;" }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Views<br>
Modify form file for new/edit view to enable the file upload</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#app/view/movies/_form.html.erb
</span><span class='line'>&lt;%= form_for(@movie, :html =&gt; { :multipart =&gt; true })  do |f| %&gt;
</span><span class='line'>  ...
</span><span class='line'>  &lt;p&gt;
</span><span class='line'>    &lt;%= f.label :pic %&gt;&lt;br/&gt;
</span><span class='line'>    &lt;%= f.file_field :pic %&gt;
</span><span class='line'>  &lt;/p&gt;
</span><span class='line'>  ...
</span><span class='line'>&lt;% end %&gt;</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Controller<br>
Permit the parameters</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#app/controler/movie_controller.rb
</span><span class='line'> # POST /movies.json
</span><span class='line'>  def create
</span><span class='line'>    @movie = Movie.new(movie_params)
</span><span class='line'>
</span><span class='line'>    respond_to do |format|
</span><span class='line'>      if @movie.save
</span><span class='line'>        format.html { redirect_to @movie, notice: 'Movie ' + @movie.title + ' was successfully created.' }
</span><span class='line'>        format.json { render action: 'show', status: :created, location: @movie }
</span><span class='line'>      else
</span><span class='line'>        format.html { render action: 'new' }
</span><span class='line'>        format.json { render json: @movie.errors, status: :unprocessable_entity }
</span><span class='line'>      end
</span><span class='line'>    end
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>   def movie_params 
</span><span class='line'>#     params.require(:movie).permit(:title, :rating, :description, :release_date) 
</span><span class='line'>     params.require(:movie).permit! 
</span><span class='line'>   end </span></code></pre></td></tr></table></div></figure>


<ul>
<li>Show the uploaded picture</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#show.haml.html
</span><span class='line'>%h4 Profile Pic:
</span><span class='line'>  =image_tag @movie.pic.url(:medium)</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Push to Heroku</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git push
</span><span class='line'>$ git push heroku master
</span><span class='line'>$ heroku run rake db:migrate</span></code></pre></td></tr></table></div></figure>


<p>sources:
<a href="https://devcenter.heroku.com/articles/paperclip-s3">https://devcenter.heroku.com/articles/paperclip-s3</a><br>
<a href="http://www.blitztheory.com/category/tutorials/">http://www.blitztheory.com/category/tutorials/</a><br></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hadoop:subprocess failed with code 1]]></title>
    <link href="http://colca.github.com/blog/2014/03/08/hadoop-subprocess-failed-with-code-1/"/>
    <updated>2014-03-08T23:55:00-08:00</updated>
    <id>http://colca.github.com/blog/2014/03/08/hadoop-subprocess-failed-with-code-1</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux : get file count and total size]]></title>
    <link href="http://colca.github.com/blog/2014/02/20/linux-get-file-count-and-total-size/"/>
    <updated>2014-02-20T08:26:00-08:00</updated>
    <id>http://colca.github.com/blog/2014/02/20/linux-get-file-count-and-total-size</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>find . -type f | wc -l
</span><span class='line'>find ./ -type f | wc -l
</span><span class='line'>ls -l | wc -l
</span><span class='line'>du -h
</span><span class='line'>du -xs
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ruby : rescue NoMethodError inside loop]]></title>
    <link href="http://colca.github.com/blog/2014/02/17/ruby-rescue-nomethoderror-inside-loop/"/>
    <updated>2014-02-17T18:03:00-08:00</updated>
    <id>http://colca.github.com/blog/2014/02/17/ruby-rescue-nomethoderror-inside-loop</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>while condition
</span><span class='line'> ...
</span><span class='line'> begin
</span><span class='line'> meth.call
</span><span class='line'> rescue NoMethodError 
</span><span class='line'> puts "NoMethodError is caught"
</span><span class='line'> next
</span><span class='line'> end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hadoop : Install Hadoop 2.2.0 on CentOS]]></title>
    <link href="http://colca.github.com/blog/2014/02/09/hadoop-install-hadoop-2-dot-2-0-on-centos/"/>
    <updated>2014-02-09T20:12:00-08:00</updated>
    <id>http://colca.github.com/blog/2014/02/09/hadoop-install-hadoop-2-dot-2-0-on-centos</id>
    <content type="html"><![CDATA[<p>Prerequisitive <br>
Download java from : <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html</a> <br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar xzf jdk-7u51-linux-x64.gz -C /usr/lib/jvm</span></code></pre></td></tr></table></div></figure>


<p>Check java version and create link jdk</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$java --version
</span><span class='line'>...
</span><span class='line'>$ln -s jdk1.7.0_51 jdk</span></code></pre></td></tr></table></div></figure>


<p>Create User And Group <br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$groupadd hadoop
</span><span class='line'>$useradd -g hadoop hduser
</span><span class='line'>$passwd hduser
</span><span class='line'>$su hduser</span></code></pre></td></tr></table></div></figure>


<p>Setup SSH Certificate <br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ssh-keygen -t rsa -P ''
</span><span class='line'>...
</span><span class='line'>Your identification has been saved in /home/hduser/.ssh/id_rsa.
</span><span class='line'>Your public key has been saved in /home/hduser/.ssh/id_rsa.pub.
</span><span class='line'>...
</span><span class='line'>$cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
</span><span class='line'>$ssh localhost</span></code></pre></td></tr></table></div></figure>


<p>Install Hadoop <br>
Download hadoop tarball from: <a href="http://archive.apache.org/dist/hadoop/core/hadoop-2.2.0/">http://archive.apache.org/dist/hadoop/core/hadoop-2.2.0/</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$sudo tar -xvzf hadoop-2.2.0.tar.gz -C /user/local
</span><span class='line'>$cd /user/local
</span><span class='line'>$sudo mv hadoop-2.2.0 hadoop
</span><span class='line'>$sudo chown -R hduser:hadoop hadoop</span></code></pre></td></tr></table></div></figure>


<p>Setup Hadoop Environment Variables</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$cd ~
</span><span class='line'>$vi .bashrc</span></code></pre></td></tr></table></div></figure>


<p>Add following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Hadoop vairables
</span><span class='line'>export JAVA_HOME=/usr/lib/jvm/jdk
</span><span class='line'>export JRE_HOME=/usr/lib/jvm/jdk/jre
</span><span class='line'>export HADOOP_INSTALL=/usr/local/hadoop
</span><span class='line'>export PATH=$PATH:$HADOOP_INSTALL/bin
</span><span class='line'>export PATH=$PATH:$HADOOP_INSTALL/sbin
</span><span class='line'>export PATH=$PATH:$JRE_HOME/bin
</span><span class='line'>export PATH=$PATH:$JAVA_HOME/bin
</span><span class='line'>export HADOOP_MAPRED_HOME=$HADOOP_INSTALL
</span><span class='line'>export HADOOP_COMMON_HOME=$HADOOP_INSTALL
</span><span class='line'>export HADOOP_HDFS_HOME=$HADOOP_INSTALL
</span><span class='line'>export YARN_HOME=$HADOOP_INSTALL</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$cd /usr/local/hadoop/etc/hadoop
</span><span class='line'>$vi hadoop-env.sh
</span><span class='line'>#modify JAVA_HOME in file to below
</span><span class='line'>export JAVA_HOME=/usr/lib/jvm/jdk</span></code></pre></td></tr></table></div></figure>


<p>Relogin with hduser and check hadoop version</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$hadoop version
</span><span class='line'>Hadoop 2.2.0
</span><span class='line'>Subversion https://svn.apache.org/repos/asf/hadoop/common -r 1529768
</span><span class='line'>Compiled by hortonmu on 2013-10-07T06:28Z
</span><span class='line'>Compiled with protoc 2.5.0
</span><span class='line'>From source with checksum 79e53ce7994d1628b240f09af91e1af4
</span><span class='line'>This command was run using /usr/local/hadoop/share/hadoop/common/hadoop-common-2.2.0.jar</span></code></pre></td></tr></table></div></figure>


<p>Configure Hadoop</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$cd /usr/local/hadoop/etc/hadoop
</span><span class='line'>$vi core-site.xml
</span><span class='line'>#paste following between &lt;configuration&gt; tag
</span><span class='line'>&lt;property&gt;
</span><span class='line'>&lt;name&gt;fs.default.name&lt;/name&gt;
</span><span class='line'>&lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'>&lt;property&gt;
</span><span class='line'>&lt;name&gt;dfs.permissions&lt;/name&gt;
</span><span class='line'>&lt;value&gt;false&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$vi yarn-site.xml
</span><span class='line'>#paste following between &lt;configuration&gt; tag
</span><span class='line'>&lt;property&gt;
</span><span class='line'>&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
</span><span class='line'>&lt;value&gt;mapreduce_shuffle&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'>&lt;property&gt;
</span><span class='line'>&lt;name&gt;yarn.nodemanager.aux_services.mapreduce.shuffle.class&lt;/name&gt;
</span><span class='line'>&lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;</span></code></pre></td></tr></table></div></figure>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$cd ~
</span><span class='line'>$mkdir -p mydata/hdfs/namenode
</span><span class='line'>$mkdir -p mydata/hdfs/datanode
</span><span class='line'>$cd /usr/local/hadoop/etc/hadoop
</span><span class='line'>$vi hdfs-site.xml
</span><span class='line'>#paste following between &lt;configuration&gt; tag
</span><span class='line'>&lt;property&gt;
</span><span class='line'>&lt;name&gt;dfs.replication&lt;/name&gt;
</span><span class='line'>&lt;value&gt;1&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'>&lt;property&gt;
</span><span class='line'>&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
</span><span class='line'>&lt;value&gt;file:/home/hduser/mydata/hdfs/namenode&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;
</span><span class='line'>&lt;property&gt;
</span><span class='line'>&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
</span><span class='line'>&lt;value&gt;file:/home/hduser/mydata/hdfs/datanode&lt;/value&gt;
</span><span class='line'>&lt;/property&gt;</span></code></pre></td></tr></table></div></figure>


<p>Format Namenode (Onetime)<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$hadoop namenode -format</span></code></pre></td></tr></table></div></figure>


<p>Start HDFS processes and Map-Reduce process</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#HDFS
</span><span class='line'>$hadoop-daemon.sh start namenode
</span><span class='line'>$hadoop-daemon.sh start datanode
</span><span class='line'>#Map-Reduce
</span><span class='line'>$yarn-daemon.sh start resourcemanager
</span><span class='line'>$yarn-daemon.sh start nodemanager
</span><span class='line'>$mr-jobhistory-daemon.sh start historyserver</span></code></pre></td></tr></table></div></figure>


<p>Verifying Installation <br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$jps
</span><span class='line'>1565 JobHistoryServer
</span><span class='line'>1037 DataNode
</span><span class='line'>960 NameNode
</span><span class='line'>1180 ResourceManager
</span><span class='line'>1420 NodeManager
</span><span class='line'>15250 Jps</span></code></pre></td></tr></table></div></figure>


<p>Run Hadoop Example <br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$cd /usr/local/hadoop
</span><span class='line'>hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-2.2.0.jar pi 2 5
</span><span class='line'>Number of Maps  = 2
</span><span class='line'>Samples per Map = 5
</span><span class='line'>Java HotSpot(TM) 64-Bit Server VM warning: You have loaded library /usr/local/hadoop/lib/native/libhadoop.so.1.0.0 which might have disabled stack guard. The VM will try to fix the stack guard now.
</span><span class='line'>It's highly recommended that you fix the library with 'execstack -c &lt;libfile&gt;', or link it with '-z noexecstack'.
</span><span class='line'>14/02/09 14:14:01 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
</span><span class='line'>Wrote input for Map #0
</span><span class='line'>Wrote input for Map #1
</span><span class='line'>
</span><span class='line'>...
</span><span class='line'>        File Input Format Counters
</span><span class='line'>                Bytes Read=236
</span><span class='line'>        File Output Format Counters
</span><span class='line'>                Bytes Written=97
</span><span class='line'>Job Finished in 11.952 seconds
</span><span class='line'>Estimated value of Pi is 3.60000000000000000000</span></code></pre></td></tr></table></div></figure>


<p>Source:<br> <a href="http://codesfusion.blogspot.com/2013/10/setup-hadoop-2x-220-on-ubuntu.html?m=1">http://codesfusion.blogspot.com/2013/10/setup-hadoop-2x-220-on-ubuntu.html?m=1</a><br>
<a href="http://nextgenhadoop.blogspot.com/2013/10/steps-to-install-hadoop-220-stable.html">http://nextgenhadoop.blogspot.com/2013/10/steps-to-install-hadoop-220-stable.html</a><br>
<a href="http://tecadmin.net/steps-to-install-hadoop-on-centosrhel-6/#">http://tecadmin.net/steps-to-install-hadoop-on-centosrhel-6/#</a> <br></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux : check Linux OS version]]></title>
    <link href="http://colca.github.com/blog/2014/02/04/linux-check-linux-os-version/"/>
    <updated>2014-02-04T18:22:00-08:00</updated>
    <id>http://colca.github.com/blog/2014/02/04/linux-check-linux-os-version</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>getconf LONG_BIT</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress: sync octopress on different machines]]></title>
    <link href="http://colca.github.com/blog/2014/01/27/octopress-sync-octopress-on-different-machines/"/>
    <updated>2014-01-27T07:28:00-08:00</updated>
    <id>http://colca.github.com/blog/2014/01/27/octopress-sync-octopress-on-different-machines</id>
    <content type="html"><![CDATA[<p>1.Follow normal setup process</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>cd octopress    # If you use RVM, You'll be asked if you trust the .rvmrc file (say yes).
</span><span class='line'>ruby --version  # Should report Ruby 1.9.3
</span><span class='line'>gem install bundler
</span><span class='line'>bundle install
</span><span class='line'>rake install
</span><span class='line'>rake setup_github_pages</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>2.Pull latest updates from remote branch to sync new machine with latest octopress</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd octopress\
</span><span class='line'>git pull origin source
</span><span class='line'>cd _deploy
</span><span class='line'>git pull origin master</span></code></pre></td></tr></table></div></figure>


<p>Now you can use rake to deploy new blogs from another machine!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[git:revert]]></title>
    <link href="http://colca.github.com/blog/2014/01/27/git-undo-a-merge/"/>
    <updated>2014-01-27T07:22:00-08:00</updated>
    <id>http://colca.github.com/blog/2014/01/27/git-undo-a-merge</id>
    <content type="html"><![CDATA[<p>To view git commit info: </br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git log</span></code></pre></td></tr></table></div></figure>


<p>press q to exit log navigation </br>
</br>
Reset using commit-sha or numbers: </br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git reset --hard commit_sha
</span><span class='line'>
</span><span class='line'>git reset --hard HEAD~5</span></code></pre></td></tr></table></div></figure>


<p>Use gitk for details of commit info: </br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gitk HEAD @{u}
</span><span class='line'>
</span><span class='line'>gitk</span></code></pre></td></tr></table></div></figure>


<p>from: </br>
<a href="http://stackoverflow.com/questions/2389361/undo-a-git-merge">http://stackoverflow.com/questions/2389361/undo-a-git-merge</a>
<a href="http://stackoverflow.com/questions/12650261/git-says-local-branch-is-behind-remote-branch-but-its-not">http://stackoverflow.com/questions/12650261/git-says-local-branch-is-behind-remote-branch-but-its-not</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setup Piwik for Octopress Analytics]]></title>
    <link href="http://colca.github.com/blog/2013/09/20/setup-piwik-for-octopress-analytics/"/>
    <updated>2013-09-20T19:00:00-07:00</updated>
    <id>http://colca.github.com/blog/2013/09/20/setup-piwik-for-octopress-analytics</id>
    <content type="html"><![CDATA[<ol>
<li><p>Install Piwik on Ubunto 12.04 Cloud Server</br>
Instruction Details: <a href="https://www.digitalocean.com/community/articles/how-to-install-piwik-on-an-ubuntu-12-04-cloud-server">https://www.digitalocean.com/community/articles/how-to-install-piwik-on-an-ubuntu-12-04-cloud-server</a> </br></p></li>
<li><p>Add Piwik Script to Each Octopress Blog</br></p></li>
</ol>


<p>Edit your source/_includes/custom/after_footer.html, add below script</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;!-- Piwik --&gt;
</span><span class='line'>&lt;script type="text/javascript"&gt; 
</span><span class='line'>  var _paq = _paq || [];
</span><span class='line'>  _paq.push(['trackPageView']);
</span><span class='line'>  _paq.push(['enableLinkTracking']);
</span><span class='line'>  (function() {
</span><span class='line'>    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://127.0.0.1/piwik//";
</span><span class='line'>    _paq.push(['setTrackerUrl', u+'piwik.php']);
</span><span class='line'>    _paq.push(['setSiteId', 1]);
</span><span class='line'>    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
</span><span class='line'>    g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
</span><span class='line'>  })();
</span><span class='line'>
</span><span class='line'>&lt;/script&gt;
</span><span class='line'>&lt;noscript&gt;&lt;p&gt;&lt;img src="http://127.0.0.1/piwik/piwik.php?idsite=1" style="border:0" alt="" /&gt;&lt;/p&gt;&lt;/noscript&gt;
</span><span class='line'>&lt;!-- End Piwik Code --&gt;</span></code></pre></td></tr></table></div></figure>


<p>  <br/>
reforence: <a href="http://octopress.org/docs/theme/template/">http://octopress.org/docs/theme/template/</a> </br>
//github.com/WyriHaximus/OctopressPiwik </br></p>

<ol>
<li>Login to Piwik to view the realtime analytics
<a href="http://127.0.0.1/piwik/index.php">http://127.0.0.1/piwik/index.php</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setup Postgresql for Rails Project]]></title>
    <link href="http://colca.github.com/blog/2013/09/17/setup-postgresql/"/>
    <updated>2013-09-17T18:35:00-07:00</updated>
    <id>http://colca.github.com/blog/2013/09/17/setup-postgresql</id>
    <content type="html"><![CDATA[<ol>
<li>Install postgresql <br></li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apt-get install postgresql</span></code></pre></td></tr></table></div></figure>


<p>update Gemfile, eliminate sqlite, add pg gem</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem 'pg', '0.12.2'</span></code></pre></td></tr></table></div></figure>


<p>then bundle install,<br>
solution if error encounted with pg gem install<br>
<a href="http://about-opensource.blogspot.com/2012/09/rails-3-application-issue-you-need-to.html">http://about-opensource.blogspot.com/2012/09/rails-3-application-issue-you-need-to.html</a></p>

<ol>
<li>Manage database<br>
To enter psql command with default user postgres<br></li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>psql postgres</span></code></pre></td></tr></table></div></figure>


<p>To create database, list database, list roles<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE USER yourname WITH SUPERUSER PASSWORD 'yourpassword';
</span><span class='line'>\l
</span><span class='line'>\du</span></code></pre></td></tr></table></div></figure>


<p>To quit<br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>\q</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Connect in Ruby, edit database.yml<br></li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  adapter:  postgresql
</span><span class='line'>  database: postgres    
</span><span class='line'>  pool: 5
</span><span class='line'>  username: username
</span><span class='line'>  password: password</span></code></pre></td></tr></table></div></figure>


<p>links<br>
Heroku postgresql:
<a href="https://devcenter.heroku.com/articles/heroku-postgresql">https://devcenter.heroku.com/articles/heroku-postgresql</a><br>
Postgresql document:
<a href="http://www.postgresql.org/docs/9.2/static/bookindex.html">http://www.postgresql.org/docs/9.2/static/bookindex.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vi: format code]]></title>
    <link href="http://colca.github.com/blog/2013/04/13/how-to-format-code-in-vim/"/>
    <updated>2013-04-13T00:28:00-07:00</updated>
    <id>http://colca.github.com/blog/2013/04/13/how-to-format-code-in-vim</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gg
</span><span class='line'>Shift+v
</span><span class='line'>Shift+g
</span><span class='line'>=</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Outdoor trails]]></title>
    <link href="http://colca.github.com/blog/2013/03/31/outdoor-trails/"/>
    <updated>2013-03-31T20:51:00-07:00</updated>
    <id>http://colca.github.com/blog/2013/03/31/outdoor-trails</id>
    <content type="html"><![CDATA[<h2>2005 – 2011 <br></h2>

<p>Involved in first outdoor activity on 2005, did a lot of 2-days trails in Zhejiang, Jiangxi, Shanxi  and other provinces of China during weekends and holidays, most of the trails are to climb mountains with height between 1400 to 1800m (4600-5900feet). Typical routine is 1 or 2 day camping plus 2 or 3 day hiking.<br></p>

<h2>Oct 2006   Taibai Mountain, Shanxi Province, China (3767m)<br></h2>

<p>4 day hiking with a 30 size team; experienced a diverse environment where middle temperature climate and alpine climate can be found in same area, with glacial remnants from Quaternary Glacier. <br>
<a href="http://en.wikipedia.org/wiki/Mount_Taibai">http://en.wikipedia.org/wiki/Mount_Taibai</a><br></p>

<h2>Oct 2007  Fairy Lake, Sichuan Province, China (4125m)<br></h2>

<p>4 day hiking in an unexploited scene in Tibetan region of Sichuan province, with 5 teammates; it’s the most beautiful and mysterious alpine lake I’ve visited.
<a href="http://flickrhivemind.net/Tags/jiulong/Interesting">http://flickrhivemind.net/Tags/jiulong/Interesting</a><br></p>

<h2>Oct 2008   Motuo, Tibet, China (1225-4170m)<br></h2>

<p>4 day trekking to the last untouched country in China, with 5 teammates; Motuo is called “hidden lotus” as its mysterious location and isolation with outside world.  You can experience mountains above 4000m, waterfall, the turbulent Brahmaputra River, and sharp altitude falling to 800m in this one trekking trail with endless accompany of thrilling leeches. <br>
<a href="http://www.tibettravel.org/trekking-tibet/trek-to-motuo.html">http://www.tibettravel.org/trekking-tibet/trek-to-motuo.html</a><br></p>

<h2>Oct 2009  Erfeng(peak of the 2nd  sister) Four  Sister Mountain, Sichuan, China(5276m)<br></h2>

<p>2 day trekking and climbing to the second highest mountain of Siguniang Moutain(Four Sister Mountain), we made it to less than 100m to the peak of the mountain due to the big snow. <br>
<a href="http://wikitravel.org/en/Siguniangshan_National_Parks">http://wikitravel.org/en/Siguniangshan_National_Parks</a><br></p>

<h2>Oct 2010   Genie Mountain, Sichuan, China (3700-4150m)<br></h2>

<p>4 day trekking in area of Genie Mountain; enjoyed the beautiful scene of snow mountain, turquoise alpine lakes and time-honored Tibetan temples. <br>
<a href="http://en.wikipedia.org/wiki/Grid_Nie_Mountain">http://en.wikipedia.org/wiki/Grid_Nie_Mountain</a><br></p>

<h2>Oct 2012   Qizanggou Valley Trail, Sichuan, China (3100-4200m)<br></h2>

<p>4 day trekking and horse trekking trail to unexploited holy Tibetan Mountains and Holy lake deep in the valley where Tibetans pray and do the ceremonies. <br>
<a href="http://www.facebook.com/media/set/?set=a.4136213717990.2161159.1062998436&amp;type=3">http://www.facebook.com/media/set/?set=a.4136213717990.2161159.1062998436&amp;type=3</a><br></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How To Setup Octopress on Windows 7]]></title>
    <link href="http://colca.github.com/blog/2013/03/28/setup-octopress-blog-on-windows-7/"/>
    <updated>2013-03-28T14:55:00-07:00</updated>
    <id>http://colca.github.com/blog/2013/03/28/setup-octopress-blog-on-windows-7</id>
    <content type="html"><![CDATA[<p>Reference:<br>
<a href="http://octopress.org/docs/setup/">http://octopress.org/docs/setup/</a><br>
<a href="http://evsseny.appspot.com/2012/03/30/Octopress-blog-install.html">http://evsseny.appspot.com/2012/03/30/Octopress-blog-install.html</a><br>
<a href="http://geekontheway.github.com/blog/2011/12/03/octopress-for-freshman/">http://geekontheway.github.com/blog/2011/12/03/octopress-for-freshman/</a><br></p>

<p><a href="http://octopress.org/docs/setup/">Setup</a><br>
1. Install <a href="http://git-scm.com/">Git</a> for Windows, <a href="https://help.github.com/articles/set-up-git">git setup</a> can now be skipped with its new installer<br>
2. Install Ruby using <a href="http://rubyinstaller.org/">RubyInstaller</a> <br>
   Install <a href="http://rubyinstaller.org/downloads/">DevKit</a> to enhance installed Ruby<br> (or error will be encountered during rake install caused by compiler missing)<br>
3. Follow the <a href="http://octopress.org/docs/setup/">Setup Octopress</a> steps <br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>cd octopress    # If you use RVM, You'll be asked if you trust the .rvmrc file (say yes).
</span><span class='line'>ruby --version  # Should report Ruby 1.9.3
</span><span class='line'>gem install bundler
</span><span class='line'>bundle install
</span><span class='line'>rake install</span></code></pre></td></tr></table></div></figure>


<p>
<a href="http://octopress.org/docs/deploying/github/">Deploy to Github pages</a> <br>
1. Create a <a href="https://github.com/new">new Github repository</a> named with your user name: yourusername.github.com<br>
Preview the github page generated by github automatically: Repository->settings->Automatic Page Generator<br>
2. Continues following the deploying guide<br>
<a href="https://help.github.com/articles/generating-ssh-keys">Generate a github ssh key</a> first or connection will be denied.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake setup_github_pages
</span><span class='line'>rake generate
</span><span class='line'>rake deploy</span></code></pre></td></tr></table></div></figure>


<p>
check with</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git status</span></code></pre></td></tr></table></div></figure>


<p>
for octopress folder, status should be branch on source; for _deploy folder, status should be branch on master.<br>
3. Commit the source <br></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git add . 
</span><span class='line'>git commit -m "first commit"
</span><span class='line'>git push origin source</span></code></pre></td></tr></table></div></figure>


<p>
Now an uncustomized octopress blog can be visited through your github pages. <br>
Follow the <a href="http://octopress.org/docs/configuring/">configuration</a> and <a href="http://octopress.org/docs/blogging/">blog</a> to start blogging.<br></p>

<p>To create new post</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake new_post["example:subtitle"]</span></code></pre></td></tr></table></div></figure>


<p>
To preview new post through <a href="http://localhost:4000">http://localhost:4000</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate
</span><span class='line'>rake preview</span></code></pre></td></tr></table></div></figure>


<p>
To deploy new post</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate
</span><span class='line'>rake deploy</span></code></pre></td></tr></table></div></figure>


<p>
To solve gbk error with CH character on windows</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>set LC_ALL=en_US.UTF-8
</span><span class='line'>set LANG=en_US.UTF-8</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
</feed>
